install.packages("devtools")
install_github('jburkhardt/RAdwords')
install.packages("googlesheets")
install.packages("ggplot2")
install.packages("RCurl")
require("devtools")
require(RGoogleAnalytics)
require(RAdwords)
require(googlesheets)
require(ggplot2)
require(RCurl)
system.file("CurlSSL", "ca-bundle.crt", package = "RCurl")
curlVersion()$protocol
# Fix get data function for Google Ads
getDataFix <- function (clientCustomerId, google_auth, statement, apiVersion = "201708",
transformation = TRUE, changeNames = TRUE, includeZeroImpressions = FALSE,
verbose = FALSE)
{
access <- google_auth$access
credlist <- google_auth$credentials
if (as.numeric(Sys.time()) - 3600 >= access$timeStamp) {
access <- refreshToken(google_auth)
}
google.auth <- paste(access$token_type, access$access_token)
cert <- system.file("CurlSSL", "ca-bundle.crt", package = "RCurl")
data <- RCurl::getURL(paste("https://adwords.google.com/api/adwords/reportdownload/v",
apiVersion, sep = ""), httpheader = c(Authorization = google.auth,
developerToken = credlist$auth.developerToken, clientCustomerId = clientCustomerId,
includeZeroImpressions = includeZeroImpressions), postfields = statement,
verbose = verbose, ssl.verifypeer = TRUE)
valid <- grepl(attr(statement, "reportType"), data)
if (transformation & valid) {
data <- transformData(data, report = attributes(statement)$reportType,
apiVersion = apiVersion)
if (changeNames) {
data <- changeNames(data)
}
}
data
}
# Init Google Ads and Google Analytics
clienid <- "475692164369-e6jmtfc7o508tvsu2doqsb2vrtofj0cp.apps.googleusercontent.com"  #Client ID ???? google cloud platform
secret  <- "i4nl7KHuRDYFXH0OIfmaeVnj"  #Secret ???? Client ID ???? google cloud platform
adwords_token <- "n1IA_l_IpDghYJ4_vSkg9A"  #Token AdWords API
ga_view <- "ga:184056816"  #View ID Google Analytics
adwordsID <- "309-670-8803"  #Google Ads account ID
#Date period
start_period <- c(day = "01",month = "02",year = "2021")
end_period <- c(day = "28",month = "02",year = "2021")
# Google Analytics Authentication
ga_auth <- Auth(clienid,secret)
require(RGoogleAnalytics)
install.packages("RGoogleAnalytics")
require(RGoogleAnalytics)
# Google Analytics Authentication
ga_auth <- Auth(clienid,secret)
# Google Ads Authentication
adwords_auth <- doAuth(F)
install_github('jburkhardt/RAdwords')
install.packages("googlesheets")
install.packages("googlesheets")
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("RCurl")
install.packages("RCurl")
require("devtools")
require(RGoogleAnalytics)
require(RAdwords)
require(googlesheets)
require(ggplot2)
require(RCurl)
# Google Ads Authentication
adwords_auth <- doAuth(F)
# Load data from google analytics
ValidateToken(ga_auth)
query.init <- Init(start.date = paste(start_period["year"],start_period["month"],start_period["day"],sep = "-"),
end.date = paste(end_period["year"],end_period["month"],end_period["day"],sep = "-"),
dimensions = "ga:adwordsCriteriaID, ga:keyword, ga:adGroup, ga:campaign, ga:adwordsAdGroupID, ga:adwordsCampaignID",
metrics = "ga:impressions",
filters = "ga:medium==cpc;ga:source==google",
table.id = ga_view,
max.results = 10000)
ga.query <- QueryBuilder(query.init)
gaData <- GetReportData(ga.query, ga_auth, split_daywise = FALSE, paginate_query = FALSE)
head(gaData)
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
#adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
#adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
view(adwordsData)
View(adwordsData)
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste(start_period["year"],start_period["month"],start_period["day"],sep='-'),
end=paste(end_period["year"],end_period["month"],end_period["day"],sep="-"))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
#adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
install.packages(c("googlesheets", "RAdwords", "RGoogleAnalytics"))
require("devtools")
require(RGoogleAnalytics)
require(RAdwords)
require(googlesheets)
require(ggplot2)
require(RCurl)
# Init Google Ads and Google Analytics
clienid <- "475692164369-e6jmtfc7o508tvsu2doqsb2vrtofj0cp.apps.googleusercontent.com"  #Client ID ???? google cloud platform
secret  <- "i4nl7KHuRDYFXH0OIfmaeVnj"  #Secret ???? Client ID ???? google cloud platform
adwords_token <- "n1IA_l_IpDghYJ4_vSkg9A"  #Token AdWords API
ga_view <- "ga:184056816"  #View ID Google Analytics
adwordsID <- "309-670-8803"  #Google Ads account ID
#Date period
start_period <- c(day = "01",month = "02",year = "2021")
end_period <- c(day = "28",month = "02",year = "2021")
# Google Analytics Authentication
ga_auth <- Auth(clienid,secret)
# Google Ads Authentication
adwords_auth <- doAuth(F)
# Load data from google analytics
ValidateToken(ga_auth)
query.init <- Init(start.date = paste(start_period["year"],start_period["month"],start_period["day"],sep = "-"),
end.date = paste(end_period["year"],end_period["month"],end_period["day"],sep = "-"),
dimensions = "ga:adwordsCriteriaID, ga:keyword, ga:adGroup, ga:campaign, ga:adwordsAdGroupID, ga:adwordsCampaignID",
metrics = "ga:impressions",
filters = "ga:medium==cpc;ga:source==google",
table.id = ga_view,
max.results = 10000)
ga.query <- QueryBuilder(query.init)
gaData <- GetReportData(ga.query, ga_auth, split_daywise = FALSE, paginate_query = FALSE)
head(gaData)
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
#adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="CAMPAIGN_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
report="CAMPAIGN_PERFORMANCE_REPORT",
start="2018-01-20",
end="2018-01-21")
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
report="CAMPAIGN_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
paste0(start_period["year"],start_period["month"],start_period["day"])
paste0(end_period["year"],end_period["month"],end_period["day"])
body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
report="CAMPAIGN_PERFORMANCE_REPORT",
start="20201001",
end="20210201")
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
report="CAMPAIGN_PERFORMANCE_REPORT",
start="2020-10-01",
end="2021-02-01")
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
adwordsID <- "142-776-5331"  #Google Ads account ID
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
View(adwordsData)
adwordsData
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
head(adwordsData)
View(adwordsData)
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Keyword','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
#body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
#                  report="CAMPAIGN_PERFORMANCE_REPORT",
#                  start="2020-10-01",
#                  end="2021-02-01")
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
#Load data from Google AdWords
body <- statement(select=c('AccountDescriptiveName','Id','FinalUrls','Status','AdGroupId','AdGroupStatus','CampaignId','CampaignStatus','Impressions','Clicks','Cost','Ctr','AveragePosition','CreativeQualityScore','PostClickQualityScore','SearchPredictedCtr','QualityScore'),
report="KEYWORDS_PERFORMANCE_REPORT",
start=paste0(start_period["year"],start_period["month"],start_period["day"]),
end=paste0(end_period["year"],end_period["month"],end_period["day"]))
#body <- statement(select=c('CampaignName','Clicks','Cost','Ctr'),
#                  report="CAMPAIGN_PERFORMANCE_REPORT",
#                  start="2020-10-01",
#                  end="2021-02-01")
adwordsData <- getData(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809")
#adwordsData <- getDataFix(clientCustomerId = adwordsID, google_auth = adwords_auth, statement = body, transformation = T, apiVersion = "201809",verbose=F)
head(adwordsData)
head(gaData)
dim(gaData)
dim(adwordsData)
totalDataRaw <- merge(adwordsData,
gaData,
by.x = c("KeywordID", "AdgroupID", "CampaignID"),
by.y = c("adwordsCriteriaID","adwordsAdGroupID","adwordsCampaignID"),
all.adwordsData = TRUE)
head(totalDataRaw)
dim(totalDataRaw)
totalData <- data.frame(Campaign = totalDataRaw$campaign,
AdGroup = totalDataRaw$adGroup,
KeyWord = totalDataRaw$keyword,
Impressions = totalDataRaw$Impressions,
Clicks = totalDataRaw$Clicks,
Cost = totalDataRaw$Cost,
CTR = totalDataRaw$CTR,
Position = totalDataRaw$Position,
Qualityscore = totalDataRaw$Qualityscore,
Adrelevance = totalDataRaw$Adrelevance,
Landingpageexperience = totalDataRaw$Landingpageexperience,
Expectedclickthroughrate = totalDataRaw$Expectedclickthroughrate)
head(totalData)
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
head(totalData1)
totalData1 <- totalDataRaw %>% select(campaign,adGroup,keyword,Impressions,Clicks,Cost,CTR,Position,Qualityscore,Adrelevance,Landingpageexperience,Expectedclickthroughrate)
install.packages("tidyr")
library(tidyr)
totalData1 <- totalDataRaw %>% select(campaign,adGroup,keyword,Impressions,Clicks,Cost,CTR,Position,Qualityscore,Adrelevance,Landingpageexperience,Expectedclickthroughrate)
install.packages("magrittr")
install.packages("magrittr")
library(magrittr)
totalData1 <- totalDataRaw %>% select(campaign,adGroup,keyword,Impressions,Clicks,Cost,CTR,Position,Qualityscore,Adrelevance,Landingpageexperience,Expectedclickthroughrate)
library(magrittr)
library(dplyr)
uninstall("googlesheets")
uninstall("googlesheets")
remove.packages("googlesheets")
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
